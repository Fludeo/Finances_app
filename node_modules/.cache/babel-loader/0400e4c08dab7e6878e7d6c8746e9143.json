{"ast":null,"code":"import _objectSpread from\"C:/Users/noah1/Documents/GitHub/Finances_app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"C:/Users/noah1/Documents/GitHub/Finances_app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/noah1/Documents/GitHub/Finances_app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"C:\\\\Users\\\\noah1\\\\Documents\\\\GitHub\\\\Finances_app\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import React,{useEffect,useState}from\"react\";import'../../styles/logged_page/home_page/home_page.css';import{useNavigate}from\"react-router-dom\";import Modal from\"../../common/Modal\";import NewRecordForm from\"./NewRecordForm\";import TotalBalance from\"./TotalBalance\";import RecordTable from\"./RecordTable\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var HomePage=function HomePage(_ref){var token=_ref.token;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),newRecordModal=_useState2[0],setNewRecordModal=_useState2[1];var _useState3=useState({}),_useState4=_slicedToArray(_useState3,2),newRecordForm=_useState4[0],setNewRecordForm=_useState4[1];var navigate=useNavigate();var _handleRecordSubmit=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var response,content;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();_context.prev=1;_context.next=4;return fetch(\"\".concat(process.env.REACT_APP_PUBLIC_URL_API,\"/record/new\"),{method:'POST',headers:{'Accept':'application/json','Content-Type':'application/json','Authorization':\"Bearer \".concat(token)},body:JSON.stringify(newRecordForm)});case 4:response=_context.sent;if(!response.ok){_context.next=10;break;}navigate('/logged/home');setNewRecordModal(false);_context.next=15;break;case 10:_context.next=12;return response.json();case 12:content=_context.sent;setNewRecordForm(_objectSpread(_objectSpread({},newRecordForm),{},{errorMessage:content.message}));throw new Error(content.message);case 15:_context.next=20;break;case 17:_context.prev=17;_context.t0=_context[\"catch\"](1);console.log(_context.t0);case 20:case\"end\":return _context.stop();}}},_callee,null,[[1,17]]);}));return function handleRecordSubmit(_x){return _ref2.apply(this,arguments);};}();useEffect(function(){if(token===''){navigate('/');}},[token]);return/*#__PURE__*/_jsxs(\"main\",{className:\"main-home\",children:[/*#__PURE__*/_jsx(\"section\",{className:\"section-balance\",children:/*#__PURE__*/_jsx(TotalBalance,{token:token,buttonOnclick:function buttonOnclick(){return setNewRecordModal(true);}})}),/*#__PURE__*/_jsx(\"section\",{className:\"section-records\",children:/*#__PURE__*/_jsx(RecordTable,{token:token})}),/*#__PURE__*/_jsx(Modal,{trigger:newRecordModal,children:/*#__PURE__*/_jsx(NewRecordForm,{handleRecordSubmit:function handleRecordSubmit(e){return _handleRecordSubmit(e);},formFields:newRecordForm,UpdateForm:function UpdateForm(payload){return setNewRecordForm(_objectSpread(_objectSpread({},payload),{},{errorMessage:''}));},closeForm:function closeForm(){return setNewRecordModal(false);}})})]});};export default HomePage;","map":{"version":3,"sources":["C:/Users/noah1/Documents/GitHub/Finances_app/src/components/logged_page/home_page/HomePage.tsx"],"names":["React","useEffect","useState","useNavigate","Modal","NewRecordForm","TotalBalance","RecordTable","HomePage","token","newRecordModal","setNewRecordModal","newRecordForm","setNewRecordForm","navigate","handleRecordSubmit","e","preventDefault","fetch","process","env","REACT_APP_PUBLIC_URL_API","method","headers","body","JSON","stringify","response","ok","json","content","errorMessage","message","Error","console","log","payload"],"mappings":"ohBAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,KAA2C,OAA3C,CACA,MAAO,kDAAP,CACA,OAASC,WAAT,KAA4B,kBAA5B,CACA,MAAOC,CAAAA,KAAP,KAAkB,oBAAlB,CACA,MAAOC,CAAAA,aAAP,KAA0B,iBAA1B,CAEA,MAAOC,CAAAA,YAAP,KAAyB,gBAAzB,CACA,MAAOC,CAAAA,WAAP,KAAwB,eAAxB,C,wFAUA,GAAMC,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,MAAmB,IAAjBC,CAAAA,KAAiB,MAAjBA,KAAiB,CACpC,cAA2CP,QAAQ,CAAU,KAAV,CAAnD,wCAAOQ,cAAP,eAAsBC,iBAAtB,eACA,eAAyCT,QAAQ,CAAiB,EAAjB,CAAjD,yCAAOU,aAAP,eAAsBC,gBAAtB,eAEA,GAAMC,CAAAA,QAAQ,CAAGX,WAAW,EAA5B,CAKA,GAAMY,CAAAA,mBAAkB,2FAAG,iBAAOC,CAAP,uIAC3BA,CAAC,CAACC,cAAF,GAD2B,sCAIAC,CAAAA,KAAK,WAAIC,OAAO,CAACC,GAAR,CAAYC,wBAAhB,gBAAuD,CAC/EC,MAAM,CAAE,MADuE,CAE/EC,OAAO,CAAE,CACP,SAAU,kBADH,CAEP,eAAgB,kBAFT,CAGP,iCAA2Bd,KAA3B,CAHO,CAFsE,CAO/Ee,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAed,aAAf,CAPyE,CAAvD,CAJL,QAIjBe,QAJiB,mBAalBA,QAAQ,CAACC,EAbS,0BAcnBd,QAAQ,CAAC,cAAD,CAAR,CACAH,iBAAiB,CAAC,KAAD,CAAjB,CAfmB,sDAmBGgB,CAAAA,QAAQ,CAACE,IAAT,EAnBH,SAmBbC,OAnBa,eAoBnBjB,gBAAgB,gCAAKD,aAAL,MAAoBmB,YAAY,CAACD,OAAO,CAACE,OAAzC,GAAhB,CApBmB,KAqBb,IAAIC,CAAAA,KAAJ,CAAUH,OAAO,CAACE,OAAlB,CArBa,0FAyBnBE,OAAO,CAACC,GAAR,cAzBmB,qEAAH,kBAAlBpB,CAAAA,kBAAkB,6CAAxB,CA+BCd,SAAS,CAAC,UAAI,CACf,GAAGQ,KAAK,GAAG,EAAX,CAAc,CACVK,QAAQ,CAAC,GAAD,CAAR,CACH,CAMC,CATQ,CASP,CAACL,KAAD,CATO,CAAT,CAUG,mBACA,cAAM,SAAS,CAAC,WAAhB,wBACI,gBAAS,SAAS,CAAC,iBAAnB,uBACI,KAAC,YAAD,EAAc,KAAK,CAAGA,KAAtB,CAA6B,aAAa,CAAE,+BAAIE,CAAAA,iBAAiB,CAAC,IAAD,CAArB,EAA5C,EADJ,EADJ,cAII,gBAAS,SAAS,CAAC,iBAAnB,uBACI,KAAC,WAAD,EAAa,KAAK,CAAEF,KAApB,EADJ,EAJJ,cAOI,KAAC,KAAD,EAAO,OAAO,CAAEC,cAAhB,uBACA,KAAC,aAAD,EAAe,kBAAkB,CAAG,4BAACM,CAAD,QAAqDD,CAAAA,mBAAkB,CAACC,CAAD,CAAvE,EAApC,CACe,UAAU,CAAEJ,aAD3B,CAEe,UAAU,CAAE,oBAACwB,OAAD,QAA0BvB,CAAAA,gBAAgB,gCAAKuB,OAAL,MAAcL,YAAY,CAAC,EAA3B,GAA1C,EAF3B,CAGe,SAAS,CAAE,2BAAIpB,CAAAA,iBAAiB,CAAC,KAAD,CAArB,EAH1B,EADA,EAPJ,GADA,CAiBH,CAnED,CAqEA,cAAeH,CAAAA,QAAf","sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport '../../styles/logged_page/home_page/home_page.css'\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport Modal from \"../../common/Modal\";\r\nimport NewRecordForm from \"./NewRecordForm\";\r\nimport { RecordFormType } from \"../../../types/types\";\r\nimport TotalBalance from \"./TotalBalance\";\r\nimport RecordTable from \"./RecordTable\";\r\n\r\n\r\n\r\n\r\n\r\ntype props = {\r\n    token:string\r\n  \r\n}\r\nconst HomePage = ({token}:props) => {\r\nconst [newRecordModal,setNewRecordModal] = useState<boolean>(false)\r\nconst [newRecordForm ,setNewRecordForm] =useState<RecordFormType>({}as RecordFormType)\r\n\r\nconst navigate = useNavigate()\r\n\r\n\r\n\r\n\r\nconst handleRecordSubmit = async (e: React.MouseEvent<HTMLButtonElement, MouseEvent>)=>{\r\ne.preventDefault()\r\n\r\ntry{\r\n    const response = await fetch(`${process.env.REACT_APP_PUBLIC_URL_API}/record/new`, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Accept': 'application/json',\r\n          'Content-Type': 'application/json',\r\n          'Authorization' :`Bearer ${token}`,\r\n        },\r\n        body: JSON.stringify(newRecordForm)\r\n      });\r\n      if(response.ok){\r\n        navigate('/logged/home')\r\n        setNewRecordModal(false)\r\n     \r\n    }\r\n    else{\r\n        const content = await response.json();\r\n        setNewRecordForm({...newRecordForm, errorMessage:content.message})\r\n        throw new Error(content.message)\r\n    }\r\n    }\r\n    catch(err){\r\n        console.log(err)\r\n    }\r\n}\r\n\r\n\r\n\r\n useEffect(()=>{\r\nif(token===''){\r\n    navigate('/')\r\n}\r\n \r\n   \r\n\r\n\r\n\r\n },[token])\r\n    return (\r\n    <main className=\"main-home\">\r\n        <section className=\"section-balance\">\r\n            <TotalBalance token= {token} buttonOnclick={()=>setNewRecordModal(true)}></TotalBalance>\r\n        </section>\r\n        <section className=\"section-records\">\r\n            <RecordTable token={token} ></RecordTable>\r\n        </section>\r\n        <Modal trigger={newRecordModal}>\r\n        <NewRecordForm handleRecordSubmit ={(e:React.MouseEvent<HTMLButtonElement, MouseEvent>)=>handleRecordSubmit(e)} \r\n                       formFields={newRecordForm} \r\n                       UpdateForm={(payload:RecordFormType)=>setNewRecordForm({...payload, errorMessage:''})} \r\n                       closeForm={()=>setNewRecordModal(false)}></NewRecordForm>\r\n        </Modal>\r\n    </main>\r\n    \r\n   )\r\n}\r\n\r\nexport default HomePage;"]},"metadata":{},"sourceType":"module"}